<!DOCTYPE html>
<html>
<head>
<title>cookEZ</title>

<meta name="viewport" content="width=device-width,height=device-height,initial-scale=1.0"/>
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
 
<script src="jquery-1.8.2.min.js"></script>
<script src="jquery.mobile-1.2.0.min.js"></script> 
 <script type="text/javascript" src="jquery.min.js"></script>
<script type="text/javascript" src="cordova.js"></script>

<script>
	var meData;
	var tag1;
	var tag2;
	var tag3;
	var tag4;
	var array1=  new Array();
	var array2=  new Array();
function alertDismissed() {
           alert('ddd');
}	
function init() {
    	document.addEventListener("deviceready", onDeviceReady, false);
}
	
function onDeviceReady()
{	
//window.plugins.spinnerDialog.show(null,'Loading Data... Please wait!');
document.addEventListener("backbutton", function (e) {
        e.preventDefault(); 
    navigator.notification.confirm("Do you want to exit cookEZ?", onConfirmExit, "cookEZ", "Yes,No");
    }, false );
}	
	
function onConfirmExit(button) {
if(button==2){ //If User select a No, then return back;
       	return; }
else{
   if (navigator.app) {
     navigator.app.exitApp(); }
   else if (navigator.device) {
     navigator.device.exitApp(); } }	}

	
function getExif() {
//    var img1 = document.getElementById("img1");
 //   EXIF.getData(img1, function() {
   //     var make = EXIF.getTag(this, "Make");
    //    var model = EXIF.getTag(this, "Model");
     //   var makeAndModel = document.getElementById("makeAndModel");
     //   makeAndModel.innerHTML = `${make} ${model}`;
   // });
    var img2 = document.getElementById("img2");
    EXIF.getData(img2, function() {
       // var allMetaData = EXIF.getAllTags(this,"GPSLatitude");
	  //   var allMetaData = EXIF.getTag(this,"GPSLatitude");
	     tag1=EXIF.getTag(this,"GPSLatitudeRef");
	    tag2=EXIF.getTag(this,"GPSLatitude");
	   tag3=EXIF.getTag(this,"GPSLongitudeRef");
	   tag4=EXIF.getTag(this,"GPSLongitude");
	//    var GeoTag=tag2+"!"+tag1+"!"+tag4+"!"+tag3;
	     allMetaDataSpan.innerHTML=`${tag1} ${tag2} ${tag3} ${tag4}`;
       // var allMetaDataSpan = document.getElementById("allMetaDataSpan");
       // allMetaDataSpan.innerHTML = JSON.stringify(allMetaData, null, "\t");
//	allMetaDataSpan.innerHTML = JSON.stringify(GeoTag, null, "\t");
	
    });
//var stringArray = allMetaDataSpan.innerHTML.split('\t');
	var stringArray = allMetaDataSpan.innerHTML;

//meData=stringArray;

	
//Display Deg Minutes sec in google map
//4330.4850 N represents 43 degrees 30 minutes and 48.50 seconds
//08011.4392 W represents 80 degrees 11 minutes and 43.92 seconds
//so that's GLatLng(43.513472,-80.195533)
//Pine Ridge Park, Guelph, Ontario

//http://maps.google.com/maps?q=43+30+48.50,-80+11+43.92
//alert(meData);
//var res = n.substring(n, searchTxt.length);
//findMyText(res);
//document.getElementById('txtAreaSpan').value=stringArray;

}
	
function ConvertDMSToDD(degrees, minutes, seconds, direction) {
    var dd = degrees + minutes/60 + seconds/(60*60);

    if (direction == "S" || direction == "W") {
        dd = dd * -1;
    } // Don't do anything for N or E
    return dd;
}


 function GetAddress(lat,lng) {
         //   var lat = parseFloat(document.getElementById("txtLatitude").value);
          //  var lng = parseFloat(document.getElementById("txtLongitude").value);
            var latlng = new google.maps.LatLng(lat, lng);
            var geocoder = geocoder = new google.maps.Geocoder();
            geocoder.geocode({ 'latLng': latlng }, function (results, status) {
                if (status == google.maps.GeocoderStatus.OK) {
                    if (results[1]) {
                        alert("Location: " + results[1].formatted_address);
                    }
                }
            });
        }
  
	
function getData11() {
//alert('Oops..! ');
//var x = new Array();
//x = a.split(",");
//array1 = tag2.split(",");
//array2 = tag4.split(",");
//alert(array1[0]);
//alert(array1.length);	
	var tg22=tag2.toString();
	var tg33=tag4.toString();
//alert('tag2= '+tg22+' tag1= '+tag1+' tag4= '+ tag4+' tag3 ='+ tag3);
//document.getElementById('txtAreaSpan').value=trim(stringArray);
//document.getElementById('tg2').value=tg22;	
	//array1 = listToArray(tag2, ',');
array1 = tg22.split(',');
array2 = tg33.split(',');
array1.push(tag1);
array2.push(tag3);
//for(var i = 0; i < str_array.length; i++) {
	for(var i = 0; i < array2.length; i++) {
   // Trim the excess whitespace.
 //  array1[i] = array1[i].replace(/^\s*/, "").replace(/\s*$/, "");
   // Add additional code here, such as:
 //  alert(array2[i]);
}
	
//alert(array2[0]);	

//var lat1=tag1.concat(str2);
//var parts = input.split(/[^\d\w]+/);
var lat1 = ConvertDMSToDD(parseFloat(array1[0]), parseFloat(array1[1]),parseFloat(array1[2]),array1[3]);	
var lng1 = ConvertDMSToDD(parseFloat(array2[0]), parseFloat(array2[1]),parseFloat(array2[2]),array2[3]);
	alert('lat'+lat1);
alert('long'+lng1);
	GetAddress(lat1,lng1);
// var parts = input.split(/[^\d\w]+/);
 //   var lat = ConvertDMSToDD(parts[0], parts[1], parts[2], parts[3]);
  //  var lng = ConvertDMSToDD(parts[4], parts[5], parts[6], parts[7]); 	
//ConvertDMSToDD(array1[0], array1[1], array1[2], tag1);	

//document.getElementById('txtAreaSpan').value;
//var s=//document.getElementById('txtAreaSpan').value;
//var n = s.search("Ref");
//alert('s'+s);
//alert('n='+n);
//var res = s.substring(s.length,n+3);
//alert('meData'+meData);
//document.getElementById('txtAreaSpan').value=searchTxt;
//var n = searchTxt.indexOf("GPSLatitudeRef");
//var res = n.substring(n, searchTxt.length);
///document.getElementById("txtAreaSpan").value= searchTxt;

}
	
	
function cat1_list(x)
{
   document.getElementById("main_scr").style.display = "none";
   document.getElementById("main_scr").style.visibility="false";	   
   
if(x=='dairy')
   {
     document.getElementById("sub_lst1").style.display = "block";
     document.getElementById("sub_lst1").style.visibility="true";
	   
     document.getElementById("sub_lst2").style.display = "none";
     document.getElementById("sub_lst2").style.visibility="false";	
	
     document.getElementById("sub_lst3").style.display = "none";
     document.getElementById("sub_lst3").style.visibility="false";	
	  
     document.getElementById("sub_lst4").style.display = "none";
     document.getElementById("sub_lst4").style.visibility="false";	
	   
     document.getElementById("sub_lst5").style.display = "none";
     document.getElementById("sub_lst5").style.visibility="false";	
	   
     document.getElementById("sub_lst6").style.display = "none";
     document.getElementById("sub_lst6").style.visibility="false";	
   }
	
else if(x=='veg')
   {
     document.getElementById("sub_lst2").style.display = "block";
     document.getElementById("sub_lst2").style.visibility="true";
	   
     document.getElementById("sub_lst1").style.display = "none";
     document.getElementById("sub_lst1").style.visibility="false";	
	
     document.getElementById("sub_lst3").style.display = "none";
     document.getElementById("sub_lst3").style.visibility="false";	
	  
     document.getElementById("sub_lst4").style.display = "none";
     document.getElementById("sub_lst4").style.visibility="false";	
	   
     document.getElementById("sub_lst5").style.display = "none";
     document.getElementById("sub_lst5").style.visibility="false";	
	   
     document.getElementById("sub_lst6").style.display = "none";
     document.getElementById("sub_lst6").style.visibility="false";	
     
}
	
	
else if(x=='meat')
   {
     document.getElementById("sub_lst3").style.display = "block";
     document.getElementById("sub_lst3").style.visibility="true";
	   
     document.getElementById("sub_lst2").style.display = "none";
     document.getElementById("sub_lst2").style.visibility="false";	
	
     document.getElementById("sub_lst1").style.display = "none";
     document.getElementById("sub_lst1").style.visibility="false";	
	  
     document.getElementById("sub_lst4").style.display = "none";
     document.getElementById("sub_lst4").style.visibility="false";	
	   
     document.getElementById("sub_lst5").style.display = "none";
     document.getElementById("sub_lst5").style.visibility="false";	
	   
     document.getElementById("sub_lst6").style.display = "none";
     document.getElementById("sub_lst6").style.visibility="false";	
     
   }
	
	
 else if(x=='bread')
   {
     document.getElementById("sub_lst4").style.display = "block";
     document.getElementById("sub_lst4").style.visibility="true";
	   
     document.getElementById("sub_lst2").style.display = "none";
     document.getElementById("sub_lst2").style.visibility="false";	
	
     document.getElementById("sub_lst3").style.display = "none";
     document.getElementById("sub_lst3").style.visibility="false";	
	  
     document.getElementById("sub_lst1").style.display = "none";
     document.getElementById("sub_lst1").style.visibility="false";	
	   
     document.getElementById("sub_lst5").style.display = "none";
     document.getElementById("sub_lst5").style.visibility="false";	
	   
     document.getElementById("sub_lst6").style.display = "none";
     document.getElementById("sub_lst6").style.visibility="false";	
     
   }
	
 else if(x=='season')
   {
     document.getElementById("sub_lst5").style.display = "block";
     document.getElementById("sub_lst5").style.visibility="true";
	   
     document.getElementById("sub_lst2").style.display = "none";
     document.getElementById("sub_lst2").style.visibility="false";	
	
     document.getElementById("sub_lst3").style.display = "none";
     document.getElementById("sub_lst3").style.visibility="false";	
	  
     document.getElementById("sub_lst4").style.display = "none";
     document.getElementById("sub_lst4").style.visibility="false";	
	   
     document.getElementById("sub_lst1").style.display = "none";
     document.getElementById("sub_lst1").style.visibility="false";	
	   
     document.getElementById("sub_lst6").style.display = "none";
     document.getElementById("sub_lst6").style.visibility="false";	
     
   }
	
else if(x=='sauce')
   {
     document.getElementById("sub_lst6").style.display = "block";
     document.getElementById("sub_lst6").style.visibility="true";
	   
     document.getElementById("sub_lst2").style.display = "none";
     document.getElementById("sub_lst2").style.visibility="false";	
	
     document.getElementById("sub_lst3").style.display = "none";
     document.getElementById("sub_lst3").style.visibility="false";	
	  
     document.getElementById("sub_lst4").style.display = "none";
     document.getElementById("sub_lst4").style.visibility="false";	
	   
     document.getElementById("sub_lst5").style.display = "none";
     document.getElementById("sub_lst5").style.visibility="false";	
	   
     document.getElementById("sub_lst1").style.display = "none";
     document.getElementById("sub_lst1").style.visibility="false";	
     
   }
}
	var itm_arr=new array();
	var values1;
	var values2;
	var values3;
	var values4;
	var values5;
	var values6;

	function getData(x)
{
	values1 = $('#dairy').val();
	values2 = $('#veg').val();
	values3 = $('#meat').val();
	values4 = $('#bread').val();
	values5 = $('#season').val();
	values6 = $('#sauce').val();
	


}
	var res1;
	var ret_arr = [];
function getList()
	{
		res1='';
	//	alert(values1);
		//alert(values2);
	//	alert(values3);
		//alert(values4);
		//alert(values5);
		//alert(values6);
		//var res1 = values1.concat(values2,values3,values4,values5,values6);
		
		if (values1 != null) {  res1 += values1+',' ; }
		if (values2 != null) {  res1+= values2+',' ;}
		if (values3 != null) {res1+= values3+',' ;}
	if (values4 != null) {res1+= values4+',' ;}
	if (values5 != null){res1+= values5+',';}
	if (values6 != null) {res1+= values6;}
		//var all_sel=values1.join()
		//res1=values1+values2+values3+values4+values5+values6;
		//res1=res1.slice(0, -1);
		alert(res1);
		back_chk();
		
		ret_arr=res1.split(',');
		arr1= remove_duplicates_safe(ret_arr);
		alert(arr1.length);
		var im_htm;
		im_htm="<table border='0' cellpadding='1' cellspacing='1' align='center'>";
		im_htm+="<tr><td align='left'><font size=4><b>Check Your List</b></font></td></tr>";
		for (var i = 0, len = arr1.length; i < len-1; i++) {
		im_htm+="<font size=4><tr valign='top'><td width='50%' bordercolor='black'><input type='checkbox' name='itm' value="+arr1[i]+">"+arr1[i]+"</td></tr></font>";
		}
		document.getElementById("main_scr").style.display = "none";
                document.getElementById("main_scr").style.visibility="false";
		document.getElementById("select_lst").style.display = "block";
                document.getElementById("select_lst").style.visibility="true";
		
		document.getElementById('select_lst').innerHTML=im_htm+"</table>" ;
	
	}
	
	function remove_duplicates_safe(arr) {
    var seen = {};
    var sel_arr = [];
    for (var i = 0; i < arr.length; i++) {
        if (!(arr[i] in seen)) {
            sel_arr.push(arr[i]);
            seen[arr[i]] = true;
        }
    }
    return sel_arr;

}	
function back_chk()
	{
	   document.getElementById("main_scr").style.display = "block";
           document.getElementById("main_scr").style.visibility="true";
	   
	   document.getElementById("sub_lst1").style.display = "none";
           document.getElementById("sub_lst1").style.visibility="false";
		
     	   document.getElementById("sub_lst2").style.display = "none";
           document.getElementById("sub_lst2").style.visibility="false";	
      
	   document.getElementById("sub_lst3").style.display = "none";
           document.getElementById("sub_lst3").style.visibility="false";	
     
           document.getElementById("sub_lst4").style.display = "none";
           document.getElementById("sub_lst4").style.visibility="false";
		
     	   document.getElementById("sub_lst5").style.display = "none";
           document.getElementById("sub_lst5").style.visibility="false";	
      
	   document.getElementById("sub_lst6").style.display = "none";
           document.getElementById("sub_lst6").style.visibility="false";	
     
		
	}
</script>
	
<style type="text/css">
body, html {
    width: 100%;
   
    margin: 0;
    padding: 0;
    
}
		
.btncss {  background-color: transparent; border:none; padding: 0; font-weight: bold; color: white;}
.btn2 {  background-color: transparent; border:none; padding: 0; font-weight: bold; color: black;}
.btn1 {  background-color: transparent; border: none; padding: 0;}
pre {
    overflow: auto;
}
.main_scr {
  
    height: 100%;
  }


.sub_lst1
	{
	display:none;
	}
.sub_lst2
	{
	display:none;
	}
.sub_lst3
	{
	display:none;
	}
.sub_lst4
	{
	display:none;
	}
.sub_lst5
	{
	display:none;
	}
.sub_lst6
	{
	display:none;
	}
 .ven
{
width: 100vw;
height: 100% !important;
text-align:center; 
	}
	</style>
	
</head>

<body style="background-color: transparent;" onload='init();'> 
	<div id='menu' class=ven>
	<table bgcolor="#DAD4D3" width='100%' align='center' cellpadding='0' cellspacing='0' > 
	<tr height='40px'><td align='center'><b>cookEZ</b></td></tr></table>
	</div>
	<div id='main_scr' class='main_scr'>
        <table border="0" height='100%' cellpadding="1" cellspacing="1">
	<tr  ><td width='50%'> <button onclick='cat1_list(this.value);' class='btn2' value='dairy'><img src='dairy.png' style="display:inline; width:90%; height:90%;"></button></td><td  > <button onclick='cat1_list(this.value);' class='btn2' value='veg'><img src='veg.png' style="display:inline; width:90%; height:90%;"></button></td></tr>
	<tr   ><td width='50%' > <button onclick='cat1_list(this.value);' class='btn2' value='pulses'><img src='pulses.png' style="display:inline; width:90%; height:90%;"></button></td><td  > <button onclick='cat1_list(this.value);' class='btn2' value='bread'><img src='bread.png' style="display:inline; width:90%; height:90%;"></button></td></tr>
	<tr   ><td width='50%'> <button onclick='cat1_list(this.value);' class='btn2' value='nuts'><img src='nuts.png' style="display:inline; width:90%; height:90%;"></button></td><td > <button onclick='cat1_list(this.value);' class='btn2' value='spices'><img src='spices.png' style="display:inline; width:90%; height:90%;"></button></td></tr>
		
	<tr bordercolor='ffffff'><td style="height:10%;" colspan=2 align='center'><font face=arial><b><button onclick='getList();'> Continue</button></b></font><button onclick='getData11();'> Display</button></td></tr>
	</table>
	</div>
	<div id='sub_lst1' class='sub_lst1' align='center'>
		
		<table border="0" bgcolor='ffffff' cellpadding="0" cellspacing="0">
		<tr bordercolor='ffffff'><td align='center' width='90%'>Dairy</td><td align='right'><button onclick='back_chk();' class='btn2'>Back</button></td></tr></table>
		<select data-role="select" style='width:400px;' multiple='multiple' name="dairy" id="dairy" data-theme="c" data-overlay-theme="d" data-native-menu="false" data-inset="true" onChange="getData(this.value);">
			<option value='milk'>Milk</option>
			<option value='cheese'>Cheese</option>
			<option value='yogurt'>Yogurt</option>
			<option value='paneer'>Paneer</option>
			<option value='butter'>Butter</option>
			<option value='buttermilk'>Buttermilk</option>
		</select>
        </div>
	
	
	<div id='sub_lst2' class='sub_lst2' align='center'>
		<table border="0" height="10%" width='100%' cellpadding="0" cellspacing="0">
		<tr><td align='center' width='90%'>Vegetables</td><td align='right' width='10%'><button onclick='back_chk();' class='btn1'>Back</button></td></tr></table>
		
		<select data-role="select" style='width:400px;' multiple='multiple' name="veg" id="veg" data-theme="c" data-overlay-theme="d" data-native-menu="false" data-inset="true" onChange="getData(this.value);">
			<option value='capsicum'>Bell Pepper (Capsicum)</option>
			<option value='potato'>Potato</option>
			<option value='onion'>Onion</option>
			<option value='tomato'>Tomato</option>
			<option value='cabbage'>Cabbage</option>
			<option value='carrot'>Carrots</option>
			<option value='lettuce'>Lettuce</option>
			<option value='spinach'>Spinach</option>
			<option value='celery'>Celery</option>
			<option value='asparagus'>Asparagus</option>
		</select>
		
	</div>
	
	<div id='sub_lst3' class='sub_lst3' align='center'>
		
		<table border="0" height="10%" width='100%' cellpadding="0" cellspacing="0">
		<tr><td align='center' width='90%'>Meat</td><td align='right' width='10%'><button onclick='back_chk();' class='btn1'>Back</button></td></tr></table>
		
		<select data-role="select" style='width:400px;' multiple='multiple' name="meat" id="meat"  data-theme="c" data-overlay-theme="d" data-native-menu="false" data-inset="true" onChange="getData(this.value);">
		<option  value='Mutton'>Mutton</option>
		<option  value='Beef'>Beef</option>
		<option  value='Ham'>Ham</option>
		<option  value='Chicken'>Chicken</option>
		<option  value='Egg'>Egg</option>
		<option  value='Fish'>Fish</option>
		<option  value='Steak'>Steak</option>
		</select>
		
	</div>
<div id='sub_lst4' class='sub_lst4' align='center'>
	
	<table border="0" height="10%" width='100%' cellpadding="0" cellspacing="0">
	<tr><td align='center' width='90%'>Bread</td><td align='right' width='10%'><button onclick='back_chk();' class='btn1'>Back</button></td></tr></table>
		
	
	
<select data-role="select" style='width:400px;' multiple='multiple' name="bread" id="bread"  data-theme="c" data-overlay-theme="d" data-native-menu="false" data-inset="true" onChange="getData(this.value);">
 <option value='Baguette'>Baguette</option>
 <option value='Bagel'>Bagel</option>
 <option value='Tortilla'>Tortilla</option>
 <option value='Rye Bread'>Rye Bread</option>
 <option value='naan'>Naan</option>
 <option value='Croissant'>Croissant</option>
 <option value='Flat_Bread'>Flat Bread</option>
 <option value='French_Bread'>French Bread</option>
</select>
</div>
	
<div id='sub_lst5' class='sub_lst5' align='center'>
<table border="0" height="10%" width='100%' cellpadding="0" cellspacing="0">
<tr><td align='center' width='90%'>Seasoning</td><td align='right' width='10%'><button onclick='back_chk();' class='btn1'>Back</button></td></tr></table>
		
<select data-role="select" style='width:400px;' multiple='multiple' name="season" id="season"  data-theme="c" data-overlay-theme="d" data-native-menu="false" data-inset="true" onChange="getData(this.value);">
<option value='Anise'>Anise</option>
<option value='Basil'>Basil</option>
<option value='Black_Pepper'>Black Pepper</option>
<option value='Peppercorn'>Peppercorn</option>
<option value='Caraway_Seed'>Caraway Seed</option>
<option value='Celery_Flakes'>Celery Flakes</option>
<option value='Celery_Seed'>Celery Seed</option>
<option value='Chilli_Powder'>Chilli Powder</option>
<option value='Cilantro_Leaves'>Cilantro Leaves</option>
<option value='Cinnamon'>Cinnamon</option>
<option value='Cloves'>Cloves</option>
<option value='Cumin'>Cumin</option>
</select>
</div>

<div id='sub_lst6' class='sub_lst6' align='center'>
<table border="0" height="10%" width='100%' cellpadding="0" cellspacing="0">
<tr><td align='center' width='90%'>Sauce</td><td align='right' width='10%'><button onclick='back_chk();' class='btn1'>Back</button></td></tr></table>
			
<select data-role="select" style='width:400px;' multiple='multiple' name="sauce" id="sauce"  data-theme="c" data-overlay-theme="d" data-native-menu="false" data-inset="true" onChange="getData(this.value);">
<option value='Pasta'>Pasta Sauce</option>
<option value='Chilly'>Chilly Sauce</option>
<option value='Green'>Green Sauce</option>
<option value='Butter'>Butter Sauce</option>
<option value='White'>White Sauce</option>
</select>
		
</div>

<div id='select_lst' class='sub_lst1'>

	
</div>

	<br>
	</body>
</html>
<!---<img src="geo_test.jpg" id="img1" width='50%' height='50%' />
<pre>Make and model: <span id="makeAndModel"></span></pre>
<br/>
<br/>-->
<!--<img src="geo_test.jpg" id="img2" width='50%' height='50%' />
<pre id="allMetaDataSpan"></pre>
<br/>
<textarea id='txtAreaSpan' rows='8' cols=90 readonly=true ></textarea>
<textarea id='tg2' rows='2' cols=90 readonly=true ></textarea>-->
	

